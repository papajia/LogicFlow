<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>è‡ªå®šä¹‰èŠ‚ç‚¹ | Logic Flow</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Logic Flow desc">
    
    <link rel="preload" href="/assets/css/0.styles.fbf5df4c.css" as="style"><link rel="preload" href="/assets/js/app.4e0df529.js" as="script"><link rel="preload" href="/assets/js/2.ce0f30c1.js" as="script"><link rel="preload" href="/assets/js/8.a1a17169.js" as="script"><link rel="preload" href="/assets/js/3.6f1b5052.js" as="script"><link rel="prefetch" href="/assets/js/10.83fc47b7.js"><link rel="prefetch" href="/assets/js/11.f62bf07b.js"><link rel="prefetch" href="/assets/js/12.15857f84.js"><link rel="prefetch" href="/assets/js/13.eb0c3dce.js"><link rel="prefetch" href="/assets/js/14.e30a5322.js"><link rel="prefetch" href="/assets/js/15.c8731950.js"><link rel="prefetch" href="/assets/js/16.5aaeab27.js"><link rel="prefetch" href="/assets/js/17.5bb66dc3.js"><link rel="prefetch" href="/assets/js/18.f63fb344.js"><link rel="prefetch" href="/assets/js/19.f6313429.js"><link rel="prefetch" href="/assets/js/20.9e9e9803.js"><link rel="prefetch" href="/assets/js/21.a5ebfee0.js"><link rel="prefetch" href="/assets/js/22.16daa81c.js"><link rel="prefetch" href="/assets/js/23.30c3748e.js"><link rel="prefetch" href="/assets/js/24.2fc8642b.js"><link rel="prefetch" href="/assets/js/25.3e360b4b.js"><link rel="prefetch" href="/assets/js/26.3833905b.js"><link rel="prefetch" href="/assets/js/27.46abf521.js"><link rel="prefetch" href="/assets/js/28.55e9788f.js"><link rel="prefetch" href="/assets/js/29.7dbc6778.js"><link rel="prefetch" href="/assets/js/30.aa415e9f.js"><link rel="prefetch" href="/assets/js/31.d0cb6496.js"><link rel="prefetch" href="/assets/js/32.4566ef10.js"><link rel="prefetch" href="/assets/js/33.386d7640.js"><link rel="prefetch" href="/assets/js/34.b81ae223.js"><link rel="prefetch" href="/assets/js/35.6d51a13e.js"><link rel="prefetch" href="/assets/js/36.16508b1f.js"><link rel="prefetch" href="/assets/js/4.69af47a6.js"><link rel="prefetch" href="/assets/js/5.0b1ff015.js"><link rel="prefetch" href="/assets/js/6.52658573.js"><link rel="prefetch" href="/assets/js/7.637023d3.js"><link rel="prefetch" href="/assets/js/9.138f1b1a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fbf5df4c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="Logic Flow" class="logo"> <span class="site-name can-hide">Logic Flow</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/start.html" class="nav-link">
  æ•™ç¨‹
</a></div><div class="nav-item"><a href="/api/logicFlowApi.html" class="nav-link">
  API
</a></div><div class="nav-item"><a href="/usage/bpmn.html" class="nav-link">
  ç¤ºä¾‹
</a></div><div class="nav-item"><a href="/article/article01.html" class="nav-link">
  æ–‡ç« 
</a></div><div class="nav-item"><a href="https://github.com/didi/LogicFlow" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/start.html" class="nav-link">
  æ•™ç¨‹
</a></div><div class="nav-item"><a href="/api/logicFlowApi.html" class="nav-link">
  API
</a></div><div class="nav-item"><a href="/usage/bpmn.html" class="nav-link">
  ç¤ºä¾‹
</a></div><div class="nav-item"><a href="/article/article01.html" class="nav-link">
  æ–‡ç« 
</a></div><div class="nav-item"><a href="https://github.com/didi/LogicFlow" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/guide/start.html" class="sidebar-link">å¿«é€Ÿä¸Šæ‰‹</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>åŸºç¡€æ•™ç¨‹</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/basic/logic-flow.html" class="sidebar-link">LogicFlow</a></li><li><a href="/guide/basic/node.html" class="sidebar-link">èŠ‚ç‚¹ Node</a></li><li><a href="/guide/basic/edge.html" class="sidebar-link">è¾¹ Edge</a></li><li><a href="/guide/basic/grid.html" class="sidebar-link">ç½‘æ ¼ Grid</a></li><li><a href="/guide/basic/background.html" class="sidebar-link">èƒŒæ™¯ Background</a></li><li><a href="/guide/basic/dnd.html" class="sidebar-link">æ‹–æ‹½ Dnd</a></li><li><a href="/guide/basic/keyboard.html" class="sidebar-link">é”®ç›˜å¿«æ·é”® Keyboard</a></li><li><a href="/guide/basic/redoundo.html" class="sidebar-link">æ’¤é”€/é‡åš Undo/Redo</a></li><li><a href="/guide/basic/snapline.html" class="sidebar-link">å¯¹é½çº¿ Snapline</a></li><li><a href="/guide/basic/silent-mode.html" class="sidebar-link">é™é»˜æ¨¡å¼</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>è¿›é˜¶æŒ‡å¼•</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/advance/theme.html" class="sidebar-link">ä¸»é¢˜ Theme æ ·å¼</a></li><li><a href="/guide/advance/event.html" class="sidebar-link">äº‹ä»¶ Event</a></li><li><a href="/guide/advance/customNode.html" aria-current="page" class="active sidebar-link">è‡ªå®šä¹‰èŠ‚ç‚¹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/advance/customNode.html#åŸç†" class="sidebar-link">åŸç†</a></li><li class="sidebar-sub-header"><a href="/guide/advance/customNode.html#æ³¨å†Œè‡ªå®šä¹‰èŠ‚ç‚¹" class="sidebar-link">æ³¨å†Œè‡ªå®šä¹‰èŠ‚ç‚¹</a></li><li class="sidebar-sub-header"><a href="/guide/advance/customNode.html#è‡ªå®šä¹‰èŠ‚ç‚¹çš„ç±»å‹" class="sidebar-link">è‡ªå®šä¹‰èŠ‚ç‚¹çš„ç±»å‹</a></li><li class="sidebar-sub-header"><a href="/guide/advance/customNode.html#è‡ªå®šä¹‰èŠ‚ç‚¹çš„-view" class="sidebar-link">è‡ªå®šä¹‰èŠ‚ç‚¹çš„ View</a></li><li class="sidebar-sub-header"><a href="/guide/advance/customNode.html#è‡ªå®šä¹‰èŠ‚ç‚¹çš„-model" class="sidebar-link">è‡ªå®šä¹‰èŠ‚ç‚¹çš„ Model</a></li><li class="sidebar-sub-header"><a href="/guide/advance/customNode.html#extendkey" class="sidebar-link">extendKey</a></li></ul></li><li><a href="/guide/advance/customEdge.html" class="sidebar-link">è‡ªå®šä¹‰è¿çº¿</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æ‹“å±•</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/extension/extension-intro.html" class="sidebar-link">ç®€ä»‹</a></li><li><a href="/guide/extension/extension-components.html" class="sidebar-link">ç»„ä»¶</a></li><li><a href="/guide/extension/bpmn-element.html" class="sidebar-link">BPMN å…ƒç´ </a></li><li><a href="/guide/extension/snapshot.html" class="sidebar-link">å¯¼å‡ºå›¾ç‰‡</a></li><li><a href="/guide/extension/adapter.html" class="sidebar-link">æ•°æ®è½¬æ¢ Adapter</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="è‡ªå®šä¹‰èŠ‚ç‚¹"><a href="#è‡ªå®šä¹‰èŠ‚ç‚¹" class="header-anchor">#</a> è‡ªå®šä¹‰èŠ‚ç‚¹</h1> <blockquote><p>Logic Flow çš„å…ƒç´ æ˜¯åŸºäº SVG å®ç°çš„ï¼Œå¦‚æœä½ å¯¹ SVG çš„ç›¸å…³çŸ¥è¯†è¿˜ä¸å¤ªç†Ÿæ‚‰ï¼Œé‚£ä¹ˆæ¨èä½ å…ˆäº†è§£ä¸€ä¸‹ <a href="https://developer.mozilla.org/zh-CN/docs/Web/SVG" target="_blank" rel="noopener noreferrer">SVG<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> çš„åŸºç¡€å†…å®¹ã€‚</p></blockquote> <h2 id="åŸç†"><a href="#åŸç†" class="header-anchor">#</a> åŸç†</h2> <h3 id="åŸºäºç»§æ‰¿çš„è‡ªå®šä¹‰èŠ‚ç‚¹"><a href="#åŸºäºç»§æ‰¿çš„è‡ªå®šä¹‰èŠ‚ç‚¹" class="header-anchor">#</a> åŸºäºç»§æ‰¿çš„è‡ªå®šä¹‰èŠ‚ç‚¹</h3> <p>Logic Flow å¯¹å¤–æš´éœ²äº†åŸºç¡€èŠ‚ç‚¹<code>BaseNode</code>å’Œ5ä¸ªä»£è¡¨ç®€å•ç±»å‹çš„èŠ‚ç‚¹<code>RectNode</code>ã€<code>CircleNode</code>ã€<code>PolygonNode</code>ã€<code>EllipseNode</code>ã€<code>DiamondNode</code>ã€‚</p> <p><img src="/assets/img/custom-node.befafe5a.png" alt="èŠ‚ç‚¹ç»§æ‰¿åŸç†"></p> <p>ç”±ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼ŒLogic Flow æä¾›çš„<code>RectNode</code>ã€<code>CircleNode</code>ã€<code>PolygonNode</code>éƒ½æ˜¯ç»§æ‰¿è‡ªå†…éƒ¨çš„<code>BaseNode</code>ã€‚å› æ­¤ï¼Œç”¨æˆ·çš„<code>CustomNode</code>å¯ä»¥é€šè¿‡ç»§æ‰¿ç®€å•ç±»å‹èŠ‚ç‚¹æ¥å®ç°ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç»§æ‰¿<code>BaseNode</code>ã€‚</p> <h3 id="mvvm"><a href="#mvvm" class="header-anchor">#</a> MVVM</h3> <p>Logic Flow å†…éƒ¨æ˜¯åŸºäº<code>MVVM</code>æ¨¡å¼è¿›è¡Œå¼€å‘çš„ï¼Œåˆ†åˆ«ä½¿ç”¨<code>preact</code>å’Œ<code>mobx</code>æ¥å¤„ç† view å’Œ modelï¼Œæ‰€ä»¥å½“æˆ‘ä»¬è‡ªå®šä¹‰èŠ‚ç‚¹çš„æ—¶å€™ï¼Œéœ€è¦ä¸ºè¿™ä¸ªèŠ‚ç‚¹å®šä¹‰<code>view</code>å’Œ<code>model</code>ã€‚</p> <h2 id="æ³¨å†Œè‡ªå®šä¹‰èŠ‚ç‚¹"><a href="#æ³¨å†Œè‡ªå®šä¹‰èŠ‚ç‚¹" class="header-anchor">#</a> æ³¨å†Œè‡ªå®šä¹‰èŠ‚ç‚¹</h2> <p>æˆ‘ä»¬å¯ä»¥åœ¨åˆ›å»º<code>LogicFlow</code>å®ä¾‹ä¹‹åï¼Œ<code>render</code>ä¹‹å‰ï¼Œä½¿ç”¨<a href="/api/logicFlowApi.html#register"><code>register</code>æ–¹æ³•</a>æ¥æ³¨å†Œè‡ªå®šä¹‰èŠ‚ç‚¹ã€‚</p> <p><code>register</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°å‘Šè¯‰ Logic Flow è‡ªå®šä¹‰èŠ‚ç‚¹çš„ç±»å‹ï¼Œç¬¬äºŒä¸ªå‚æ•°å¯ä»¥ä¸ºè‡ªå®šä¹‰èŠ‚ç‚¹å®šä¹‰<code>view</code>å’Œ<code>model</code>ã€‚<code>register</code>çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå®ƒçš„å‚æ•°åŒ…å«äº† Logic Flow å†…éƒ¨æ‰€æœ‰èŠ‚ç‚¹çš„<code>view</code>å’Œ<code>model</code>ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<strong>ç»§æ‰¿</strong>è¿™äº›å†…éƒ¨çš„<code>view</code>å’Œ<code>model</code>æ¥å®ç°è‡ªå®šä¹‰èŠ‚ç‚¹çš„<code>view</code>å’Œ<code>model</code>ï¼Œä¸‹æ–‡è¯¦ç»†ä»‹ç»äº†æ³¨å†Œè‡ªå®šä¹‰èŠ‚ç‚¹çš„ç»†èŠ‚ã€‚</p> <h2 id="è‡ªå®šä¹‰èŠ‚ç‚¹çš„ç±»å‹"><a href="#è‡ªå®šä¹‰èŠ‚ç‚¹çš„ç±»å‹" class="header-anchor">#</a> è‡ªå®šä¹‰èŠ‚ç‚¹çš„ç±»å‹</h2> <p>å¦‚æœæˆ‘ä»¬è¦æ³¨å†Œä¸€ä¸ª<code>type</code>ä¸º<code>startEvent</code>çš„è‡ªå®šä¹‰èŠ‚ç‚¹ï¼Œè¿™ä¸ªèŠ‚ç‚¹å½¢çŠ¶æ˜¯ä¸€ä¸ªåœ†å½¢ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ç»§æ‰¿å†…ç½®çš„<code>Circle</code>èŠ‚ç‚¹ï¼ˆå®é™…æ˜¯ç»§æ‰¿<code>Circle</code>çš„<code>view</code>å’Œ<code>model</code>ï¼‰æ¥å¿«é€Ÿå®ç°ï¼Œä¾‹å¦‚ï¼š</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// æ³¨å†Œè‡ªå®šä¹‰èŠ‚ç‚¹</span>
lf<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'startEvent'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>RegisterParam<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> CircleNode<span class="token punctuation">,</span> CircleNodeModel <span class="token punctuation">}</span> <span class="token operator">=</span> RegisterParam<span class="token punctuation">;</span>
  <span class="token comment">// è‡ªå®šä¹‰èŠ‚ç‚¹çš„ viewï¼ŒCircleNode æ˜¯ Circle çš„ view</span>
  <span class="token keyword">class</span> <span class="token class-name">StartEventView</span> <span class="token keyword">extends</span> <span class="token class-name">CircleNode</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token comment">// è‡ªå®šä¹‰èŠ‚ç‚¹çš„ modelï¼ŒCircleNodeModel æ˜¯ Circle çš„ model</span>
  <span class="token keyword">class</span> <span class="token class-name">StartEventModel</span> <span class="token keyword">extends</span> <span class="token class-name">CircleNodeModel</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    view<span class="token operator">:</span> StartEventView<span class="token punctuation">,</span>
    model<span class="token operator">:</span> StartEventModel<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ä½¿ç”¨è‡ªå®šä¹‰èŠ‚ç‚¹</span>
lf<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  nodes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      id<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      <span class="token keyword">type</span><span class="token operator">:</span> <span class="token string">'startEvent'</span><span class="token punctuation">,</span>
      x<span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
      y<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
      text<span class="token operator">:</span> <span class="token string">'å¼€å§‹'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è®¿é—® <a href="/api/logicFlowApi.html#register">API</a> æ¥æŸ¥çœ‹<code>register</code>æä¾›çš„<code>view</code>å’Œ<code>model</code>å…¨é›†ã€‚</p> <h2 id="è‡ªå®šä¹‰èŠ‚ç‚¹çš„-view"><a href="#è‡ªå®šä¹‰èŠ‚ç‚¹çš„-view" class="header-anchor">#</a> è‡ªå®šä¹‰èŠ‚ç‚¹çš„ View</h2> <p>èŠ‚ç‚¹åœ¨<code>view</code>ä¸­ç»´æŠ¤äº†è‡ªèº«çš„<code>VNode</code>ï¼ŒLogic Flow æ¸²æŸ“èŠ‚ç‚¹æ—¶ä¼šå®ä¾‹åŒ–<code>view</code>ï¼Œå¹¶ä¸»åŠ¨è°ƒç”¨<code>view</code>ä¸­çš„<code>getShape</code>æ–¹æ³•æ¥ç¡®å®š<code>VNode</code>è¯¥å¦‚ä½•æ¸²æŸ“ï¼Œé€šè¿‡<strong>å¤å†™</strong>è¯¥æ–¹æ³•å°±å¯ä»¥å®ç°è‡ªå®šä¹‰èŠ‚ç‚¹çš„<code>view</code>ã€‚</p> <h3 id="getshape"><a href="#getshape" class="header-anchor">#</a> getShape</h3> <p><code>getShape</code>æ–¹æ³•å¯ä»¥è¿”å›ä»»æ„ SVG èƒ½è¯†åˆ«çš„æ ‡ç­¾ï¼Œè¿™ä¸ªè¿”å›çš„å…ƒç´ å°±æ˜¯è‡ªå®šä¹‰èŠ‚ç‚¹çš„<code>VNode</code>ï¼Œç›®å‰éœ€è¦ä½¿ç”¨ Logic Flow æä¾›çš„ <code>h</code> æ–¹æ³•æ¥åˆ›å»º SVG å…ƒç´ ã€‚</p> <p>ä»¥è‡ªå®šä¹‰ä¸€ä¸ªæ­£æ–¹å½¢ï¼ˆsquareï¼‰èŠ‚ç‚¹ä¸ºä¾‹ï¼Œç›´æ¥é€šè¿‡ç»§æ‰¿<code>RectNode</code>æ¥å®ç°ï¼Œæˆ‘éœ€è¦åœ¨<code>getShape</code>æ–¹æ³•ä¸­è¿”å›ä¸€ä¸ª SVG å…ƒç´ ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code>lf<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'square'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">RegisterParam</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// h æ–¹æ³•ç”± Logic Flow æä¾›</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> RectNode<span class="token punctuation">,</span> RectNodeModel<span class="token punctuation">,</span> h <span class="token punctuation">}</span> <span class="token operator">=</span> RegisterParam<span class="token punctuation">;</span>
  <span class="token keyword">class</span> <span class="token class-name">SquareView</span> <span class="token keyword">extends</span> <span class="token class-name">RectNode</span> <span class="token punctuation">{</span>
    <span class="token comment">// getShape çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªé€šè¿‡ h æ–¹æ³•åˆ›å»ºçš„ svg å…ƒç´ </span>
    <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ä½¿ç”¨ h æ–¹æ³•åˆ›å»ºä¸€ä¸ªçŸ©å½¢</span>
      <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&quot;rect&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token comment">// some attributies</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    view<span class="token operator">:</span> SquareView<span class="token punctuation">,</span>
    model<span class="token operator">:</span> RectNodeModel<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// é…ç½®èŠ‚ç‚¹</span>
lf<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  nodes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      id<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      type<span class="token operator">:</span> <span class="token string">'square'</span><span class="token punctuation">,</span>
      x<span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
      y<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
      text<span class="token operator">:</span> <span class="token string">'æ­£æ–¹å½¢'</span><span class="token punctuation">,</span>
      properties<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ<code>getShape</code>æ–¹æ³•è¿”å›äº†ä¸€ä¸ªæ²¡æœ‰ä»»ä½•å±æ€§çš„ rect æ ‡ç­¾ï¼ŒLogic Flow æ‹¿åˆ°è¿™ä¸ªè¿”å›å€¼åä¼šç›´æ¥åœ¨<code>graph</code>ä¸­è¿›è¡Œæ¸²æŸ“ã€‚ï¼ˆæ­¤æ—¶èŠ‚ç‚¹è¿˜ä¸èƒ½æ­£å¸¸æ˜¾ç¤ºï¼Œ<code>view</code>ä»ç„¶ç¼ºå°‘äº†<code>model</code>æ‰€æä¾›çš„æ•°æ®ï¼‰</p> <p>å¯ä»¥çœ‹å‡ºï¼Œ<code>view</code>åªä¸“æ³¨äºèŠ‚ç‚¹åº”è¯¥å¦‚ä½•æ¸²æŸ“ï¼Œè€Œæ¸²æŸ“æ—¶æ‰€éœ€è¦çš„æ®å…¨éƒ¨æºè‡ªäº<code>model</code>ï¼ŒLogic Flow åœ¨<code>view</code>ä¸­æä¾›äº†ä¸¤ä¸ªæ–¹æ³•å¯ä»¥è·å–è¿™äº›æ•°æ®ã€‚</p> <ul><li><a href="/guide/advance/customNode.html#getshapestyle">getShapeStyle</a></li> <li><a href="/guide/advance/customNode.html#getattributes">getAttributes</a></li></ul> <h3 id="getshapestyle"><a href="#getshapestyle" class="header-anchor">#</a> getShapeStyle</h3> <p><code>getShapeStyle</code>æ–¹æ³•è¿”å›äº†èŠ‚ç‚¹åœ¨æ¸²æŸ“æ—¶æ‰€éœ€è¦çš„éƒ¨åˆ†æ ·å¼å±æ€§ï¼Œè¿™äº›å±æ€§æºè‡ªèŠ‚ç‚¹æ‰€å¯¹åº”çš„<code>model</code>ã€‚</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// ä¸ºè‡ªå®šä¹‰èŠ‚ç‚¹å¤å†™ getShapeStyle</span>
<span class="token function">getShapeStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getShapeStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>style<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç»§ç»­çœ‹å‰æ–‡ä¸­çš„æ­£æ–¹å½¢èŠ‚ç‚¹ç¤ºä¾‹ï¼Œç°åœ¨æˆ‘ä»¬é€šè¿‡<code>getShapeStyle</code>è·å–åˆ°<code>model</code>ä¸­çš„<a href="/api/nodeApi.html#æ ·å¼å±æ€§">æ ·å¼å±æ€§</a>ï¼Œå¹¶å°†å…¶èµ‹å€¼ç»™ rect æ ‡ç­¾ä¸Šã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code>lf<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'square'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">RegisterParam</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> RectNode<span class="token punctuation">,</span> RectNodeModel<span class="token punctuation">,</span> h <span class="token punctuation">}</span> <span class="token operator">=</span> RegisterParam<span class="token punctuation">;</span>
  <span class="token keyword">class</span> <span class="token class-name">SquareView</span> <span class="token keyword">extends</span> <span class="token class-name">RectNode</span> <span class="token punctuation">{</span>
    <span class="token comment">// è·å– model ä¸­çš„æ ·å¼å±æ€§</span>
    <span class="token function">getShapeStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getShapeStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>style<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getShapeStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&quot;rect&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>style
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    view<span class="token operator">:</span> SquareView<span class="token punctuation">,</span>
    model<span class="token operator">:</span> RectNodeModel<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// é€šè¿‡ setTheme å°† model ä¸­çš„ width å’Œ height è®¾ä¸º 100</span>
lf<span class="token punctuation">.</span><span class="token function">setTheme</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  rect<span class="token operator">:</span> <span class="token punctuation">{</span>
    width<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    height<span class="token operator">:</span> <span class="token number">100</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

lf<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  nodes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      id<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      type<span class="token operator">:</span> <span class="token string">'square'</span><span class="token punctuation">,</span>
      x<span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
      y<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
      text<span class="token operator">:</span> <span class="token string">'æ­£æ–¹å½¢'</span><span class="token punctuation">,</span>
      properties<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡<code>getShapeStyle</code>æ–¹æ³•è·å–åˆ°äº†<code>model</code>æ‰€ç»´æŠ¤çš„æ ·å¼å±æ€§ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™ rect æ ‡ç­¾ã€‚</p> <blockquote><p>æˆ‘ä»¬ä¸æ¨èåœ¨<code>view</code>ä¸­ç›´æ¥ä¿®æ”¹èŠ‚ç‚¹çš„å„ç±»å±æ€§ï¼Œå› ä¸ºåœ¨ LF ä¸­ï¼Œé”šç‚¹å’Œå¤–è¾¹æ¡†çš„æ¸²æŸ“æ•°æ®éƒ½åŸºäº<code>model</code>çš„æ•°æ®ï¼Œåœ¨<code>view</code>ä¸­è®¾ç½®çš„æ•°æ®å¹¶ä¸èƒ½å½±å“åˆ°é”šç‚¹å’Œå¤–è¾¹æ¡†ï¼Œè¿›è€Œå¯¼è‡´æ¸²æŸ“å‡ºç°é—®é¢˜ï¼Œæ‰€ä»¥ç›´æ¥åœ¨<code>model</code>ä¸­ä¿®æ”¹å±æ€§æ˜¯æ­£ç¡®çš„å§¿åŠ¿ã€‚æ­¤å¤–é€šè¿‡<code>lf.setTheme</code>æ–¹æ³•è®¾ç½®çš„æ ·å¼æ˜¯ä½œç”¨äºå…¨å±€çš„ï¼Œå¯¹äºè‡ªå®šä¹‰èŠ‚ç‚¹ï¼Œæˆ‘ä»¬æ¨èç›´æ¥ä¿®æ”¹<code>model</code>ä¸­çš„æ ·å¼å±æ€§ã€‚åœ¨ä¸‹æ–‡ï¼Œæˆ‘ä»¬ä¼šå­¦ä¹ å¦‚ä½•åœ¨<a href="/guide/advance/customNode.html#è‡ªå®šä¹‰èŠ‚ç‚¹çš„-model">model</a>ä¸­è®¾ç½®å„ç§å±æ€§ã€‚</p></blockquote> <p>ç°åœ¨èŠ‚ç‚¹çš„åŸºæœ¬æ ·å¼å·²ç»å¯ä»¥æ­£å¸¸æ¸²æŸ“äº†ï¼Œä½†æ˜¯åœ¨ Logic Flow ä¸­ï¼Œä¸€ä¸ªèŠ‚ç‚¹çš„åŸºæœ¬åŠŸèƒ½ï¼ˆä¾‹ï¼šæ¸²æŸ“ä½ç½®ï¼‰è¿˜å—å…¶è‡ªèº«çš„<a href="/api/nodeApi.html#é€šç”¨å±æ€§">æ•°æ®å±æ€§</a>æ‰€å½±å“ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜è¦æ ¹æ®æ•°æ®å±æ€§ä¸ºèŠ‚ç‚¹æ ‡ç­¾è®¾ç½®å¿…è¦çš„å±æ€§ã€‚</p> <h3 id="getattributes"><a href="#getattributes" class="header-anchor">#</a> getAttributes</h3> <p>é™¤äº†æ ·å¼å±æ€§ä»¥å¤–ï¼ŒLogic Flow è¿˜ä¸ºæˆ‘ä»¬æä¾›äº†èŠ‚ç‚¹çš„<a href="/api/nodeApi.html#é€šç”¨å±æ€§">æ•°æ®å±æ€§</a>ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>getAttributes</code>è¿›è¡Œè·å–ã€‚</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// ä¸ºè‡ªå®šä¹‰èŠ‚ç‚¹å¤å†™ getAttributes</span>
<span class="token function">getAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> attributes <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>attributes<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä»ç„¶ä»¥è‡ªå®šä¹‰çš„æ­£æ–¹å½¢èŠ‚ç‚¹ä¸ºä¾‹ï¼Œç°åœ¨æˆ‘ä»¬è¦æŠŠ rect æ‰€éœ€è¦çš„å±æ€§è¡¥å……å®Œæ•´ã€‚</p> <div class="language-ts extra-class"><pre class="language-ts"><code>lf<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'square'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>RegisterParam<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> RectNode<span class="token punctuation">,</span> RectNodeModel<span class="token punctuation">,</span> h <span class="token punctuation">}</span> <span class="token operator">=</span> RegisterParam<span class="token punctuation">;</span>
  <span class="token keyword">class</span> <span class="token class-name">SquareView</span> <span class="token keyword">extends</span> <span class="token class-name">RectNode</span> <span class="token punctuation">{</span>
    <span class="token function">getShapeStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getShapeStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>style<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// è·å– model ä¸­çš„æ•°æ®å±æ€§</span>
    <span class="token function">getAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> attributes <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>attributes<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getShapeStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> width<span class="token punctuation">,</span> height <span class="token punctuation">}</span> <span class="token operator">=</span> style<span class="token punctuation">;</span> 
      <span class="token keyword">const</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// rect æ ‡ç­¾çš„ xï¼Œy å¯¹åº”çš„æ˜¯å›¾å½¢çš„å·¦ä¸Šè§’</span>
      <span class="token comment">// æ‰€ä»¥æˆ‘ä»¬è¦å°†çŸ©å½¢çš„ä¸­å¿ƒç§»åŠ¨åˆ° xï¼Œy</span>
      <span class="token keyword">const</span> position <span class="token operator">=</span> <span class="token punctuation">{</span>
        x<span class="token operator">:</span> x <span class="token operator">-</span> width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span>
        y<span class="token operator">:</span> y <span class="token operator">-</span> height <span class="token operator">/</span><span class="token number">2</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&quot;rect&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>style<span class="token punctuation">,</span>
        <span class="token operator">...</span>position
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    view<span class="token operator">:</span> SquareView<span class="token punctuation">,</span>
    model<span class="token operator">:</span> RectNodeModel<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

lf<span class="token punctuation">.</span><span class="token function">setTheme</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  rect<span class="token operator">:</span> <span class="token punctuation">{</span>
    width<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    height<span class="token operator">:</span> <span class="token number">100</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

lf<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  nodes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      id<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      <span class="token keyword">type</span><span class="token operator">:</span> <span class="token string">'square'</span><span class="token punctuation">,</span>
      x<span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
      y<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
      text<span class="token operator">:</span> <span class="token string">'æ­£æ–¹å½¢'</span><span class="token punctuation">,</span>
      properties<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡<code>getAttributes</code>æ–¹æ³•è·å–åˆ°äº†èŠ‚ç‚¹<code>model</code>ä¸­çš„æ•°æ®å±æ€§ï¼Œå¹¶å°† rect å…ƒç´ ä¸æ•°æ®å±æ€§ä¸­çš„<code>(x, y)</code>å¯¹é½ï¼Œåˆ°æ­¤ä¸ºæ­¢ï¼Œä¸€ä¸ªè‡ªå®šä¹‰æ­£æ–¹å½¢èŠ‚ç‚¹å·²ç»å¯ä»¥æ­£å¸¸æ˜¾ç¤ºå¹¶ä½¿ç”¨äº†ã€‚ğŸ‰</p> <h3 id="è‡ªå®šä¹‰å±æ€§-properties"><a href="#è‡ªå®šä¹‰å±æ€§-properties" class="header-anchor">#</a> è‡ªå®šä¹‰å±æ€§ <code>properties</code></h3> <p>åœ¨ä¸šåŠ¡ä¸­ï¼Œè‡ªå®šä¹‰èŠ‚ç‚¹å¸¸å¸¸ä¼šæœ‰è®¸å¤šé™„åŠ çš„ç‰¹æ€§ï¼Œä¾‹å¦‚æ ¹æ®ä¸åŒçš„ä¸šåŠ¡å±æ€§å±•ç°å‡ºä¸åŒçš„æ ·å¼ï¼Œå¯¹äºè¿™ç§éœ€æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é…ç½®èŠ‚ç‚¹çš„<a href="/api/nodeApi.html#é€šç”¨å±æ€§">æ•°æ®å±æ€§</a>æ—¶é€šè¿‡<code>properties</code>è¿›è¡Œè®¾ç½®ã€‚</p> <div class="language-ts extra-class"><pre class="language-ts"><code>lf<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'square'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>RegisterParam<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> RectNode<span class="token punctuation">,</span> RectNodeModel<span class="token punctuation">,</span> h <span class="token punctuation">}</span> <span class="token operator">=</span> RegisterParam<span class="token punctuation">;</span>
  <span class="token keyword">class</span> <span class="token class-name">SquareView</span> <span class="token keyword">extends</span> <span class="token class-name">RectNode</span> <span class="token punctuation">{</span>
    <span class="token function">getShapeStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getShapeStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>style<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">getAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> attributes <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>attributes<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getShapeStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> width<span class="token punctuation">,</span> height <span class="token punctuation">}</span> <span class="token operator">=</span> style<span class="token punctuation">;</span> 
      <span class="token keyword">const</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> properties <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> position <span class="token operator">=</span> <span class="token punctuation">{</span>
        x<span class="token operator">:</span> x <span class="token operator">-</span> width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span>
        y<span class="token operator">:</span> y <span class="token operator">-</span> height <span class="token operator">/</span><span class="token number">2</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// è¯»å– properties ä¸­çš„é™„åŠ å±æ€§</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> executed <span class="token punctuation">}</span> <span class="token operator">=</span> properties<span class="token punctuation">;</span>
      <span class="token comment">// å¦‚æœèŠ‚ç‚¹å·²ç»æ‰§è¡Œï¼Œåˆ™è¾¹æ¡†æ˜¾ç¤ºä¸ºç»¿è‰²</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>executed<span class="token punctuation">)</span> style<span class="token punctuation">.</span>stroke <span class="token operator">=</span> <span class="token string">'#2da54e'</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&quot;rect&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>style<span class="token punctuation">,</span>
        <span class="token operator">...</span>position
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    view<span class="token operator">:</span> SquareView<span class="token punctuation">,</span>
    model<span class="token operator">:</span> RectNodeModel<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

lf<span class="token punctuation">.</span><span class="token function">setTheme</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  rect<span class="token operator">:</span> <span class="token punctuation">{</span>
    width<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    height<span class="token operator">:</span> <span class="token number">100</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// é…ç½®èŠ‚ç‚¹æ—¶ï¼Œåœ¨ properties ä¸­è®¾ç½®éœ€è¦çš„é™„åŠ å±æ€§</span>
lf<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  nodes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      id<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      <span class="token keyword">type</span><span class="token operator">:</span> <span class="token string">'square'</span><span class="token punctuation">,</span>
      x<span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
      y<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
      text<span class="token operator">:</span> <span class="token string">'æ­£æ–¹å½¢'</span><span class="token punctuation">,</span>
      properties<span class="token operator">:</span> <span class="token punctuation">{</span>
        executed<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>properties</code>å¯ä»¥æ”¾ä»»ä½•å€¼ï¼ŒLogic Flow å†…éƒ¨ä¸ä¼šä½¿ç”¨å®ƒï¼Œå½“æ¥å…¥æ–¹éœ€è¦å­˜æ”¾ä¸€äº›å’ŒèŠ‚ç‚¹ç›¸ç»‘å®šçš„æ•°æ®æ—¶ï¼Œå¯ä»¥å°†å…¶åŠ å…¥åˆ°<code>properties</code>ä¸­ã€‚</p> <blockquote><p>Logic Flow è‡ªå®šä¹‰èŠ‚ç‚¹çš„çµæ´»æ€§å°±åœ¨äº<code>getAttributes</code>æ–¹æ³•å’Œ<code>properties</code>å±æ€§çš„ä½¿ç”¨ï¼Œè¿™ä¸¤è€…çš„ç»“åˆå¯ä»¥å®ç°å¤§éƒ¨åˆ†ä¸šåŠ¡å¯¹äºèŠ‚ç‚¹çš„éœ€æ±‚ã€‚</p></blockquote> <h2 id="è‡ªå®šä¹‰èŠ‚ç‚¹çš„-model"><a href="#è‡ªå®šä¹‰èŠ‚ç‚¹çš„-model" class="header-anchor">#</a> è‡ªå®šä¹‰èŠ‚ç‚¹çš„ Model</h2> <p>èŠ‚ç‚¹åœ¨<code>model</code>ä¸­ç»´æŠ¤äº†ä»¥ä¸‹å†…å®¹ï¼š</p> <ul><li>èŠ‚ç‚¹çš„<a href="/api/nodeApi.html#é€šç”¨å±æ€§">æ•°æ®å±æ€§</a>å’Œ<a href="/api/nodeApi.html#æ ·å¼å±æ€§">æ ·å¼å±æ€§</a></li> <li>åœ¨è¿çº¿æ—¶ï¼ŒèŠ‚ç‚¹ä½œä¸º<code>source</code>æˆ–<code>target</code>çš„<strong>è¿çº¿è§„åˆ™</strong></li> <li>ç®€å•èŠ‚ç‚¹çš„<a href="/api/nodeApi.html#èŠ‚ç‚¹å±æ€§">èŠ‚ç‚¹å±æ€§</a></li></ul> <h3 id="æ•°æ®å±æ€§å’Œæ ·å¼å±æ€§"><a href="#æ•°æ®å±æ€§å’Œæ ·å¼å±æ€§" class="header-anchor">#</a> æ•°æ®å±æ€§å’Œæ ·å¼å±æ€§</h3> <p>åœ¨å‰æ–‡ä¸­æˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œä¸ºè‡ªå®šä¹‰èŠ‚ç‚¹çš„<code>view</code>å®šä¹‰<code>VNode</code>æ—¶ï¼Œå¯ä»¥é€šè¿‡<code>getShapeStyle</code>å’Œ<code>getAttributes</code>æ–¹æ³•æ¥è·å–èŠ‚ç‚¹æ¸²æŸ“æ—¶æ‰€éœ€è¦çš„æ•°æ®ï¼Œè¿™äº›æ•°æ®å…¨éƒ¨æºè‡ªäºèŠ‚ç‚¹çš„<code>model</code>ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨<code>model</code>ä¸­ä¿®æ”¹è¿™äº›å±æ€§æ¥å®ç°è‡ªå®šä¹‰èŠ‚ç‚¹çš„éƒ¨åˆ†æ•ˆæœã€‚</p> <h4 id="è‡ªå®šä¹‰èŠ‚ç‚¹çš„æ ·å¼å±æ€§"><a href="#è‡ªå®šä¹‰èŠ‚ç‚¹çš„æ ·å¼å±æ€§" class="header-anchor">#</a> è‡ªå®šä¹‰èŠ‚ç‚¹çš„æ ·å¼å±æ€§</h4> <p>ä»¥æ­£æ–¹å½¢çš„<code>width</code>å’Œ<code>height</code>ä¸ºä¾‹ï¼Œåœ¨ä¹‹å‰çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡<code>lf.setTheme</code>æ–¹æ³•è®¾ç½®çŸ©å½¢çš„å…¨å±€æ ·å¼ï¼Œç°åœ¨æˆ‘ä»¬åªå¯¹<code>square</code>èŠ‚ç‚¹çš„æ ·å¼è¿›è¡Œè®¾ç½®ã€‚</p> <div class="language-ts extra-class"><pre class="language-ts"><code>lf<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'square'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>RegisterParam<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> RectNode<span class="token punctuation">,</span> RectNodeModel<span class="token punctuation">,</span> h <span class="token punctuation">}</span> <span class="token operator">=</span> RegisterParam<span class="token punctuation">;</span>
  <span class="token keyword">class</span> <span class="token class-name">SquareView</span> <span class="token keyword">extends</span> <span class="token class-name">RectNode</span> <span class="token punctuation">{</span>
    <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getShapeStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> width<span class="token punctuation">,</span> height <span class="token punctuation">}</span> <span class="token operator">=</span> style<span class="token punctuation">;</span> 
      <span class="token keyword">const</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> position <span class="token operator">=</span> <span class="token punctuation">{</span>
        x<span class="token operator">:</span> x <span class="token operator">-</span> width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span>
        y<span class="token operator">:</span> y <span class="token operator">-</span> height <span class="token operator">/</span><span class="token number">2</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&quot;rect&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>style<span class="token punctuation">,</span>
        <span class="token operator">...</span>position
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// è‡ªå®šä¹‰èŠ‚ç‚¹çš„ model</span>
  <span class="token keyword">class</span> <span class="token class-name">SquareModel</span> <span class="token keyword">extends</span> <span class="token class-name">RectNodeModel</span> <span class="token punctuation">{</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> graphModel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">super</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> graphModel<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    view<span class="token operator">:</span> SquareView<span class="token punctuation">,</span>
    model<span class="token operator">:</span> SquareModel<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// é…ç½®èŠ‚ç‚¹æ—¶ï¼Œåœ¨ properties ä¸­è®¾ç½®éœ€è¦çš„é™„åŠ å±æ€§</span>
lf<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  nodes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      id<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      <span class="token keyword">type</span><span class="token operator">:</span> <span class="token string">'square'</span><span class="token punctuation">,</span>
      x<span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
      y<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
      text<span class="token operator">:</span> <span class="token string">'æ­£æ–¹å½¢'</span><span class="token punctuation">,</span>
      properties<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨<code>model</code>çš„æ„é€ å‡½æ•°é‡Œé¢è®¾ç½®äº†<code>width</code>å’Œ<code>height</code>ï¼Œç°åœ¨èŠ‚ç‚¹<code>view</code>é€šè¿‡<code>getShapeStyle</code>è·å–çš„æ ·å¼ä¹Ÿå°±éšä¹‹å‘ç”Ÿäº†å˜æ›´ã€‚åŒæ—¶å¯ä»¥çœ‹åˆ°ï¼Œåœ¨è‡ªå®šä¹‰<code>model</code>æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æä¾›ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¹¶åœ¨å†…éƒ¨è°ƒç”¨<code>super</code>æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–ï¼ŒLogic Flow ä¼šä¸ºæ„é€ å‡½æ•°æä¾›ä¸¤ä¸ªå‚æ•°ã€‚</p> <ul><li><code>data</code> - é…ç½®èŠ‚ç‚¹æ—¶çš„<a href="/api/nodeApi.html#é€šç”¨å±æ€§">æ•°æ®å±æ€§</a></li> <li><code>graphModel</code> - LF å†…éƒ¨æ•°æ®ï¼ˆç»§æ‰¿è‡ª<code>BaseNodeModel</code>æ—¶ä¸å­˜åœ¨è¯¥å‚æ•°ï¼›ä¸å»ºè®®åšä»»ä½•æ”¹åŠ¨ï¼Œåç»­ç‰ˆæœ¬ä¼šåˆ æ‰ã€‚ï¼‰</li></ul> <h4 id="è‡ªå®šä¹‰èŠ‚ç‚¹çš„æ•°æ®å±æ€§"><a href="#è‡ªå®šä¹‰èŠ‚ç‚¹çš„æ•°æ®å±æ€§" class="header-anchor">#</a> è‡ªå®šä¹‰èŠ‚ç‚¹çš„æ•°æ®å±æ€§</h4> <p>åœ¨<a href="/api/nodeApi.html#é€šç”¨å±æ€§">æ•°æ®å±æ€§</a>ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®èŠ‚ç‚¹çš„èµ·å§‹ä½ç½®ã€æ–‡æœ¬å†…å®¹åŠå…¶ä½ç½®ã€è‡ªå®šä¹‰å±æ€§ç­‰ï¼Œè¿™äº›æ•°æ®æœ€ç»ˆéƒ½ä¼šè¢«ä¼ å…¥<code>model</code>è¿›è¡Œåˆå§‹åŒ–ï¼Œæ‰€ä»¥æˆ‘ä»¬åŒæ ·å¯ä»¥åœ¨<code>model</code>ä¸­å¯¹è¿™äº›å€¼è¿›è¡Œé‡æ–°å®šä¹‰ã€‚</p> <p>ä»¥æ­£æ–¹å½¢èŠ‚ç‚¹ä¸ºä¾‹ï¼Œç°åœ¨æˆ‘ä»¬æƒ³è¦è‡ªå®šä¹‰èŠ‚ç‚¹çš„æ–‡æœ¬ä½ç½®ã€‚</p> <div class="language-ts extra-class"><pre class="language-ts"><code>lf<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'square'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>RegisterParam<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> RectNode<span class="token punctuation">,</span> RectNodeModel<span class="token punctuation">,</span> h <span class="token punctuation">}</span> <span class="token operator">=</span> RegisterParam<span class="token punctuation">;</span>
  <span class="token keyword">class</span> <span class="token class-name">SquareView</span> <span class="token keyword">extends</span> <span class="token class-name">RectNode</span> <span class="token punctuation">{</span>
    <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getShapeStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> width<span class="token punctuation">,</span> height <span class="token punctuation">}</span> <span class="token operator">=</span> style<span class="token punctuation">;</span> 
      <span class="token keyword">const</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> position <span class="token operator">=</span> <span class="token punctuation">{</span>
        x<span class="token operator">:</span> x <span class="token operator">-</span> width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span>
        y<span class="token operator">:</span> y <span class="token operator">-</span> height <span class="token operator">/</span><span class="token number">2</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&quot;rect&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>style<span class="token punctuation">,</span>
        <span class="token operator">...</span>position
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// è‡ªå®šä¹‰èŠ‚ç‚¹çš„ model</span>
  <span class="token keyword">class</span> <span class="token class-name">SquareModel</span> <span class="token keyword">extends</span> <span class="token class-name">RectNodeModel</span> <span class="token punctuation">{</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> graphModel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">super</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> graphModel<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
      <span class="token comment">// è®¾ç½®èŠ‚ç‚¹çš„æ–‡æœ¬ä½ç½®</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>text<span class="token punctuation">,</span> <span class="token comment">// å¿…éœ€ã€‚super() å·²ç»ä¸º text è®¾ç½®äº†éƒ¨åˆ†å†…éƒ¨æ•°æ®</span>
        y<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>text<span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token number">70</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    view<span class="token operator">:</span> SquareView<span class="token punctuation">,</span>
    model<span class="token operator">:</span> SquareModel<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// é…ç½®èŠ‚ç‚¹æ—¶ï¼Œåœ¨ properties ä¸­è®¾ç½®éœ€è¦çš„é™„åŠ å±æ€§</span>
lf<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  nodes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      id<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      <span class="token keyword">type</span><span class="token operator">:</span> <span class="token string">'square'</span><span class="token punctuation">,</span>
      x<span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
      y<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
      text<span class="token operator">:</span> <span class="token string">'æ­£æ–¹å½¢'</span><span class="token punctuation">,</span>
      properties<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="ç®€å•èŠ‚ç‚¹çš„èŠ‚ç‚¹å±æ€§"><a href="#ç®€å•èŠ‚ç‚¹çš„èŠ‚ç‚¹å±æ€§" class="header-anchor">#</a> ç®€å•èŠ‚ç‚¹çš„èŠ‚ç‚¹å±æ€§</h3> <p>ä¸åŒå½¢çŠ¶çš„ç®€å•èŠ‚ç‚¹æ‰€å¯¹åº”çš„ SVG æ ‡ç­¾ä¸åŒï¼Œå…¶æ‰€éœ€è¦çš„æ ‡ç­¾å±æ€§ä¹Ÿç•¥æœ‰ä¸åŒï¼ŒæŸ¥çœ‹<a href="/api/nodeApi.html#èŠ‚ç‚¹å±æ€§">èŠ‚ç‚¹API</a>ä»¥è·å–æ›´è¿‡ä¿¡æ¯ã€‚</p> <p>ä¾‹å¦‚æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªä¸‰è§’å½¢çš„èŠ‚ç‚¹ã€‚</p> <div class="language-ts extra-class"><pre class="language-ts"><code>lf<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'triangle'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>RegisterParam<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> PolygonNode<span class="token punctuation">,</span> PolygonNodeModel <span class="token punctuation">}</span> <span class="token operator">=</span> RegisterParam<span class="token punctuation">;</span>
  <span class="token keyword">class</span> <span class="token class-name">TriangleModel</span> <span class="token keyword">extends</span> <span class="token class-name">PolygonNodeModel</span> <span class="token punctuation">{</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> graphModel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">super</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> graphModel<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// å¤šè¾¹å½¢çš„èŠ‚ç‚¹å±æ€§ points</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>points <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    view<span class="token operator">:</span> PolygonNode<span class="token punctuation">,</span>
    model<span class="token operator">:</span> TriangleModel<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><iframe width="100%" height="200" src="" data-v-e8c9530e></iframe></p> <blockquote><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒLogic Flow ä¼šåœ¨æ¯ä¸ªé¡¶ç‚¹ä¸Šç”Ÿæˆä¸€ä¸ªå¯ä»¥è¿æ¥çš„é”šç‚¹ã€‚</p></blockquote> <h3 id="è¿çº¿è§„åˆ™"><a href="#è¿çº¿è§„åˆ™" class="header-anchor">#</a> è¿çº¿è§„åˆ™</h3> <p>åœ¨æŸäº›æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦æ§åˆ¶è¿çº¿çš„è¿æ¥æ–¹å¼ï¼Œæ¯”å¦‚å¼€å§‹èŠ‚ç‚¹ä¸èƒ½è¢«å…¶å®ƒèŠ‚ç‚¹è¿æ¥ã€ç»“æŸèŠ‚ç‚¹ä¸èƒ½è¿æ¥å…¶ä»–èŠ‚ç‚¹ã€ç”¨æˆ·èŠ‚ç‚¹åé¢å¿…é¡»æ˜¯åˆ¤æ–­èŠ‚ç‚¹ç­‰ã€‚Logic Flow åœ¨<code>model</code>ä¸­æä¾›äº†ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•æ¥å®ç°èŠ‚ç‚¹çš„è¿çº¿è§„åˆ™ã€‚</p> <ul><li><a href="/guide/advance/customNode.html#getconnectedsourcerules">getConnectedSourceRules</a></li> <li><a href="/guide/advance/customNode.html#getconnectedtargetrules">getConnectedTargetRules</a></li></ul> <h4 id="getconnectedsourcerules"><a href="#getconnectedsourcerules" class="header-anchor">#</a> getConnectedSourceRules</h4> <p>é€šè¿‡è¯¥æ–¹æ³•èƒ½å¤Ÿè·å–å½“å‰èŠ‚ç‚¹ä½œä¸ºè¿çº¿å¼€å§‹ç‚¹ï¼ˆsourceï¼‰çš„æ ¡éªŒè§„åˆ™ã€‚å®ƒçš„çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªåŒ…å«äº†å¤šé¡¹æ ¡éªŒè§„åˆ™çš„æ•°ç»„ï¼Œæ¯é¡¹è§„åˆ™éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºå…¶è®¾ç½®<code>messgage</code>å’Œ<code>validate</code>å±æ€§ã€‚</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">getConnectedSourceRules</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// åœ¨æ‰€ç»§æ‰¿èŠ‚ç‚¹çš„è¿çº¿è§„åˆ™çš„åŸºç¡€ä¸Šæ·»åŠ æ–°çš„è§„åˆ™</span>
  <span class="token keyword">const</span> rules <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getConnectedSourceRules</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> rule <span class="token operator">=</span> <span class="token punctuation">{</span>
    message<span class="token operator">:</span> <span class="token string">'ä¸æ»¡è¶³è¿çº¿çš„æ ¡éªŒè§„åˆ™'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">validate</span><span class="token operator">:</span> <span class="token punctuation">(</span>source<span class="token punctuation">,</span> target<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// æ ¡éªŒè§„åˆ™</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  rules<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>rule<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> rules<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ<code>getConnectedSourceRules</code>æ–¹æ³•åœ¨æ‰€ç»§æ‰¿èŠ‚ç‚¹çš„æ ¡éªŒè§„åˆ™çš„åŸºç¡€ä¸Šæ–°å¢äº†ä¸€é¡¹ ruleï¼Œrule çš„<code>message</code>å±æ€§æ˜¯å½“ä¸æ»¡è¶³æ ¡éªŒè§„åˆ™æ—¶æ‰€æŠ›å‡ºçš„é”™è¯¯ä¿¡æ¯ï¼Œ<code>validate</code>åˆ™æ˜¯ä¼ å…¥è§„åˆ™æ£€éªŒçš„å›è°ƒå‡½æ•°ã€‚</p> <p><code>validate</code>æ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸ºåŒ…å«äº†è‡ªèº«æ•°æ®å±æ€§çš„è¿çº¿èµ·å§‹èŠ‚ç‚¹ï¼ˆsourceï¼‰å’Œè¿çº¿ç›®æ ‡èŠ‚ç‚¹ï¼ˆtargetï¼‰ã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®èŠ‚ç‚¹çš„æƒ…å†µï¼Œæ¥è¿”å›<code>true or false</code>. <code>true</code>è¡¨ç¤ºé€šè¿‡æ ¡éªŒã€‚</p> <p>ä¾‹å¦‚æˆ‘ä»¬æƒ³å®ç°ä¸€ä¸ªç”¨æˆ·èŠ‚ç‚¹ï¼ˆUserTaskï¼‰ï¼Œåœ¨è¿çº¿æ—¶å®ƒçš„ä¸‹ä¸€èŠ‚ç‚¹åªèƒ½æ˜¯ç½‘å…³èŠ‚ç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥ç»™<code>UserTask</code>æ·»åŠ ä½œä¸º<code>source</code>èŠ‚ç‚¹çš„æ ¡éªŒè§„åˆ™ã€‚</p> <div class="language-ts extra-class"><pre class="language-ts"><code>lf<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'userTask'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>RegisterParam<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> RectNode<span class="token punctuation">,</span> RectNodeModel <span class="token punctuation">}</span> <span class="token operator">=</span> RegisterParam<span class="token punctuation">;</span>
  <span class="token keyword">class</span> <span class="token class-name">UserTaskView</span> <span class="token keyword">extends</span> <span class="token class-name">RectNode</span> <span class="token punctuation">{</span>
    <span class="token comment">// è‡ªå®šä¹‰å½¢çŠ¶</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">class</span> <span class="token class-name">UserTaskModel</span> <span class="token keyword">extends</span> <span class="token class-name">RectNodeModel</span> <span class="token punctuation">{</span>
    <span class="token comment">// è®¾ç½®æ ¡éªŒè§„åˆ™</span>
    <span class="token function">getConnectedSourceRules</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> rules <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getConnectedSourceRules</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> gateWayOnlyAsTarget <span class="token operator">=</span> <span class="token punctuation">{</span>
        message<span class="token operator">:</span> <span class="token string">'æµç¨‹èŠ‚ç‚¹ä¸‹ä¸€ä¸ªèŠ‚ç‚¹åªèƒ½æ˜¯ç½‘å…³èŠ‚ç‚¹'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">validate</span><span class="token operator">:</span> <span class="token punctuation">(</span>source<span class="token punctuation">,</span> target<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">let</span> isValid <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">!==</span> <span class="token string">'gateway'</span><span class="token punctuation">)</span> isValid <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> isValid<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      rules<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>gateWayOnlyAsTarget<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> rules<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    view<span class="token operator">:</span> UserTaskView<span class="token punctuation">,</span>
    model<span class="token operator">:</span> UserTaskModel<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><iframe width="100%" height="400" src="" data-v-e8c9530e></iframe></p> <p>å½“åœ¨é¢æ¿ä¸Šè¿›è¡Œè¿çº¿æ“ä½œçš„æ—¶å€™ï¼ŒLogic Flow ä¼šåˆ¤æ–­æ‰€æœ‰çš„è§„åˆ™æ˜¯å¦é€šè¿‡ï¼Œåªæœ‰<strong>å…¨éƒ¨</strong>é€šè¿‡æ‰èƒ½è¿æ¥ã€‚</p> <p>è®¿é—® <a href="/api/modelApi.html#getconnectedsourcerules">API</a> ä»¥æŸ¥çœ‹<code>getConnectedSourceRules</code>æ–¹æ³•çš„è¯¦ç»†ä¿¡æ¯ã€‚</p> <h4 id="getconnectedtargetrules"><a href="#getconnectedtargetrules" class="header-anchor">#</a> getConnectedTargetRules</h4> <p>åŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é‡å†™<code>getConnectedTargetRules</code>æ–¹æ³•ï¼Œæ¥å®ç°å½“èŠ‚ç‚¹ä½œä¸ºç›®æ ‡èŠ‚ç‚¹ï¼ˆtargetï¼‰æ—¶çš„æ ¡éªŒè§„åˆ™ã€‚è®¿é—® <a href="/api/modelApi.html#getconnectedtargetrules">API</a> ä»¥æŸ¥çœ‹<code>getConnectedTargetRules</code>æ–¹æ³•çš„è¯¦ç»†ä¿¡æ¯ã€‚</p> <h4 id="æ¥æ”¶é”™è¯¯æ¶ˆæ¯"><a href="#æ¥æ”¶é”™è¯¯æ¶ˆæ¯" class="header-anchor">#</a> æ¥æ”¶é”™è¯¯æ¶ˆæ¯</h4> <p>åœ¨è¿çº¿æ—¶ï¼Œå½“é¼ æ ‡æ¾å¼€åå¦‚æœæ²¡æœ‰é€šè¿‡è‡ªå®šä¹‰è§„åˆ™ï¼ˆ<code>validate</code>æ–¹æ³•è¿”å›å€¼ä¸º<code>false</code>ï¼‰ï¼ŒLogic Flow ä¼šå¯¹å¤–æŠ›å‡ºäº‹ä»¶<code>connection:not-allowed</code>ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code>lf<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'connection:not-allowed'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">msg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="extendkey"><a href="#extendkey" class="header-anchor">#</a> extendKey</h2> <p>å½“æˆ‘ä»¬æ³¨å†Œçš„è‡ªå®šä¹‰èŠ‚ç‚¹å¸Œæœ›å¯ä»¥è¢«å…¶ä»–è‡ªå®šä¹‰èŠ‚ç‚¹ç»§æ‰¿æ—¶ï¼Œå°±éœ€è¦ä¸º<code>view</code>å’Œ<code>model</code>éƒ½è®¾ç½®ä¸€ä¸ªé™æ€å±æ€§<code>extendKey</code>ï¼Œä»¥ä¾¿åœ¨<code>lf.register</code>çš„ç¬¬äºŒä¸ªå›è°ƒå‡½æ•°çš„å‚æ•°ä¸­è¢«è®¿é—®åˆ°ã€‚</p> <div class="language-ts extra-class"><pre class="language-ts"><code>lf<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'CustomNode'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> BaseNode<span class="token punctuation">,</span> BaseNodeModel <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">class</span> <span class="token class-name">View</span> <span class="token keyword">extends</span> <span class="token class-name">BaseNode</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> extendKey <span class="token operator">=</span> <span class="token string">'CustomNodeView'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">class</span> <span class="token class-name">Model</span> <span class="token keyword">extends</span> <span class="token class-name">BaseNodeModel</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> extendKey <span class="token operator">=</span> <span class="token string">'CustomNodeModel'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    view<span class="token operator">:</span> View<span class="token punctuation">,</span>
    model<span class="token operator">:</span> Model<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/guide/advance/event.html" class="prev">
        äº‹ä»¶ Event
      </a></span> <span class="next"><a href="/guide/advance/customEdge.html">
        è‡ªå®šä¹‰è¿çº¿
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.4e0df529.js" defer></script><script src="/assets/js/2.ce0f30c1.js" defer></script><script src="/assets/js/8.a1a17169.js" defer></script><script src="/assets/js/3.6f1b5052.js" defer></script>
  </body>
</html>
